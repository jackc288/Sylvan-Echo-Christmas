<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ‰‹åŠ¿æ§åˆ¶ï¼šå‰ä¾å¡å“‡ä¸ç²’å­åœ£è¯æ ‘</title>
    <!-- ä½¿ç”¨å…¨å±€è„šæœ¬ï¼Œè¿™æ˜¯å¾®ä¿¡ç¯å¢ƒå…¼å®¹æ€§çš„å…³é”® -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            margin: 0; 
            overflow: hidden; 
            background-color: #000; 
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        #container { 
            position: absolute; 
            top: 0; left: 0; 
            width: 100vw; height: 100vh; 
            z-index: 1; 
        }
        #status {
            position: absolute; top: 20px; left: 0;
            width: 100%; text-align: center;
            color: #4cd964; z-index: 20;
            pointer-events: none; font-size: 16px;
            font-weight: bold; padding: 0 15px;
            text-shadow: 0 0 5px rgba(0,0,0,0.8);
        }
        #loading-overlay {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000; z-index: 100;
            display: flex; justify-content: center;
            align-items: center; flex-direction: column;
            color: #4cd964;
        }
        #loading-text { margin-top: 20px; font-size: 18px; }
        .spinner {
            width: 50px; height: 50px;
            border: 4px solid rgba(76, 217, 100, 0.2);
            border-top-color: #4cd964;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        #control-panel {
            position: absolute; bottom: 20px; left: 0;
            width: 100%; text-align: center; z-index: 10;
        }
        .control-box {
            display: inline-block;
            background: rgba(0, 20, 30, 0.85);
            border-radius: 20px; padding: 12px 20px;
            border: 1px solid rgba(0, 255, 200, 0.4);
            box-shadow: 0 0 20px rgba(0, 255, 200, 0.2);
        }
        .btn-row { margin-bottom: 8px; }
        button {
            background: rgba(40, 40, 80, 0.8);
            color: white; border: none; padding: 8px 16px;
            margin: 0 4px; border-radius: 50px; font-size: 14px;
            cursor: pointer; min-width: 80px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.2s;
        }
        button:hover, button.active {
            background: rgba(0, 180, 255, 0.9);
            border-color: #00b4ff;
        }
        button.test-btn { background: rgba(255, 80, 0, 0.8); }
        button.test-btn:hover { background: rgba(255, 50, 0, 0.9); }
        #video-preview {
            position: absolute; top: 0; left: 0;
            width: 1px; height: 1px; opacity: 0.001;
            z-index: -1; pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div class="spinner"></div>
        <div id="loading-text">æ­£åœ¨åˆå§‹åŒ–...</div>
    </div>
    <div id="status">å‡†å¤‡å¯åŠ¨...</div>
    <video id="video-preview" playsinline webkit-playsinline muted></video>
    <div id="container"></div>
    <div id="control-panel">
        <div class="control-box">
            <div class="btn-row">
                <button onclick="switchModel('hachiware')" id="btn-hachiware" class="active">å°å…«</button>
                <button onclick="switchModel('usagi')" id="btn-usagi">ä¹Œè¨å¥‡</button>
                <button onclick="switchModel('chiikawa')" id="btn-chiikawa">å‰ä¾å¡å“‡</button>
            </div>
            <div class="btn-row">
                <button onclick="forceShape('tree')" class="test-btn">æµ‹è¯•ï¼šå˜æ ‘</button>
                <button onclick="forceShape('firework')" class="test-btn">æµ‹è¯•ï¼šçƒŸèŠ±</button>
                <button onclick="forceShape('random')" class="test-btn">æµ‹è¯•ï¼šéšæœº</button>
                <button onclick="initCamera()">å¯åŠ¨æ‘„åƒå¤´</button>
            </div>
            <div style="color: rgba(255,255,255,0.7); font-size: 13px; margin-top: 8px;">
                âœŠ æ¡æ‹³ â†’ åœ£è¯æ ‘ | âœ‹ å¼ æ‰‹ â†’ çƒŸèŠ±
            </div>
        </div>
    </div>

    <script>
        // === å…¨å±€å˜é‡ ===
        let scene, camera, renderer, controls;
        let particles = [], particleGroup;
        let currentModel = null, currentModelName = 'hachiware';
        let targetShape = 'random', isHandDetected = false;
        let handPosition = new THREE.Vector3(0, 0, 0);
        let clock = new THREE.Clock();
        let handLandmarker = null, webcamRunning = false;

        // å¸¸é‡
        const TREE_HEIGHT = 25, TREE_RADIUS = 10, PARTICLE_COUNT = 800;

        // === 1. å®‰å…¨åˆå§‹åŒ–å…¥å£ ===
        window.onload = function() {
            console.log("é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...");
            // åˆå§‹åŒ–vConsoleè°ƒè¯•å·¥å…·ï¼ˆç§»åŠ¨ç«¯çœ‹æ—¥å¿—ï¼‰
            if (typeof VConsole !== 'undefined') {
                var vConsole = new VConsole();
                console.log('vConsole è°ƒè¯•å·¥å…·å·²å¯ç”¨');
            }
            
            // ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥Three.jsæ˜¯å¦åŠ è½½æˆåŠŸ
            if (!window.THREE) {
                showError("Three.jsåº“åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•");
                return;
            }
            console.log("âœ“ Three.js åŠ è½½æˆåŠŸ");
            
            // ç¬¬äºŒæ­¥ï¼šè®¾ç½®3Dåœºæ™¯ï¼ˆæœ€æ ¸å¿ƒä¸”å¿…é¡»æˆåŠŸï¼‰
            try {
                setupScene();
                createParticles();
                console.log("âœ“ 3Dåœºæ™¯ä¸ç²’å­ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ");
            } catch (sceneError) {
                showError("3Dåœºæ™¯åˆå§‹åŒ–å¤±è´¥: " + sceneError.message);
                return;
            }
            
            // ç¬¬ä¸‰æ­¥ï¼šåŠ è½½è§’è‰²æ¨¡å‹ï¼ˆå…è®¸å¤±è´¥ï¼Œæœ‰å¤‡ç”¨æ–¹æ¡ˆï¼‰
            setTimeout(function() {
                loadModel('hachiware');
            }, 100);
            
            // ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–æ‰‹åŠ¿è¯†åˆ«ï¼ˆå¼‚æ­¥ï¼Œå…è®¸å¤±è´¥ï¼‰
            setTimeout(function() {
                initHandTracking().then(function() {
                    console.log("âœ“ æ‰‹åŠ¿è¯†åˆ«åˆå§‹åŒ–æˆåŠŸ");
                }).catch(function(err) {
                    console.warn("æ‰‹åŠ¿è¯†åˆ«åˆå§‹åŒ–å¤±è´¥ï¼Œå¯ä½¿ç”¨æ‰‹åŠ¨æµ‹è¯•æŒ‰é’®:", err);
                    document.getElementById('status').innerText = "æ‰‹åŠ¿è¯†åˆ«åŠ è½½å¤±è´¥ï¼Œè¯·ä½¿ç”¨æ‰‹åŠ¨æµ‹è¯•æŒ‰é’®";
                });
            }, 300);
            
            // ç¬¬äº”æ­¥ï¼šéšè—åŠ è½½ç•Œé¢
            setTimeout(function() {
                document.getElementById('loading-overlay').style.display = 'none';
                console.log("âœ“ åŠ è½½ç•Œé¢å·²éšè—");
                document.getElementById('status').innerText = "åˆå§‹åŒ–å®Œæˆï¼è¯·ç‚¹å‡»ã€Œå¯åŠ¨æ‘„åƒå¤´ã€";
            }, 1000); // 1ç§’åéšè—ï¼Œç¡®ä¿ä¸»åœºæ™¯å¯è§
            
            // ç¬¬å…­æ­¥ï¼šå¼€å§‹åŠ¨ç”»å¾ªç¯
            setTimeout(function() {
                try {
                    animate();
                    console.log("âœ“ åŠ¨ç”»å¾ªç¯å·²å¯åŠ¨");
                } catch (e) {
                    console.error("åŠ¨ç”»å¾ªç¯å¯åŠ¨å¤±è´¥:", e);
                }
            }, 1500);
        };

        function showError(msg) {
            console.error(msg);
            var overlay = document.getElementById('loading-overlay');
            overlay.innerHTML = '<div style="color:#ff5555; text-align:center; padding:20px; max-width:300px;">' +
                '<h3>åˆå§‹åŒ–å¤±è´¥</h3><p>' + msg + '</p>' +
                '<p>è¯·å°è¯•ï¼š</p><p>1. åˆ·æ–°é¡µé¢</p><p>2. ä½¿ç”¨Chromeæµè§ˆå™¨æµ‹è¯•</p>' +
                '<button onclick="location.reload()" style="padding:10px 20px; margin-top:15px; background:#ff5555; color:white; border:none; border-radius:5px;">ç‚¹å‡»é‡è¯•</button>' +
                '</div>';
        }

        // === 2. 3Dåœºæ™¯è®¾ç½® ===
        function setupScene() {
            const container = document.getElementById('container');
            // åœºæ™¯
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x050510);
            // ç›¸æœº
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 12, 45);
            // æ¸²æŸ“å™¨
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
            container.appendChild(renderer.domElement);
            // ç®€å•æ§åˆ¶å™¨ï¼ˆå¦‚æœOrbitControlsåŠ è½½å¤±è´¥å¯é™çº§ï¼‰
            try {
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.autoRotate = true;
                controls.autoRotateSpeed = 0.3;
            } catch (e) {
                console.warn("OrbitControlsåŠ è½½å¤±è´¥ï¼Œå°†ä½¿ç”¨åŸºç¡€æ§åˆ¶:", e);
                // é™çº§ä¸ºæ‰‹åŠ¨æ§åˆ¶
                window.addEventListener('mousemove', onMouseMove);
                window.addEventListener('touchmove', onTouchMove);
            }
            // ç¯å…‰
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight.position.set(10, 20, 10);
            scene.add(dirLight);
            // çª—å£å¤§å°è°ƒæ•´
            window.addEventListener('resize', function() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function onMouseMove(event) {
            if (!controls) {
                camera.position.x = (event.clientX / window.innerWidth - 0.5) * 20;
                camera.position.y = 12 - (event.clientY / window.innerHeight) * 10;
                camera.lookAt(0, 0, 0);
            }
        }
        function onTouchMove(event) {
            if (!controls && event.touches.length > 0) {
                event.preventDefault();
                const touch = event.touches[0];
                camera.position.x = (touch.clientX / window.innerWidth - 0.5) * 20;
                camera.position.y = 12 - (touch.clientY / window.innerHeight) * 10;
                camera.lookAt(0, 0, 0);
            }
        }

        // === 3. è§’è‰²æ¨¡å‹åŠ è½½ï¼ˆå¸¦é™çº§ï¼‰ ===
        function loadModel(name) {
            currentModelName = name;
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('#control-panel button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${name}`).classList.add('active');
            
            // ç§»é™¤æ—§æ¨¡å‹
            if (currentModel) {
                scene.remove(currentModel);
                currentModel = null;
            }
            
            // å¦‚æœå­˜åœ¨PMXæ–‡ä»¶åˆ™å°è¯•åŠ è½½ï¼Œå¦åˆ™ç›´æ¥ä½¿ç”¨å¤‡ç”¨æ¨¡å‹
            const modelFiles = {
                'hachiware': { color: 0x6495ED, pos: [15, -8, 0] },
                'usagi': { color: 0xFFD700, pos: [15, -8, -5] },
                'chiikawa': { color: 0xFF69B4, pos: [15, -8, 5] }
            };
            const config = modelFiles[name] || modelFiles.hachiware;
            
            createSimpleModel(name, config.color, config.pos);
            document.getElementById('status').innerText = name + " å·²åŠ è½½ï¼";
        }

        function createSimpleModel(name, color, position) {
            const group = new THREE.Group();
            // èº«ä½“
            const bodyGeo = new THREE.CapsuleGeometry(1.5, 3, 4, 8);
            const bodyMat = new THREE.MeshLambertMaterial({ color: color });
            const body = new THREE.Mesh(bodyGeo, bodyMat);
            body.position.y = 1;
            group.add(body);
            // å¤´éƒ¨
            const headGeo = new THREE.SphereGeometry(2, 16, 16);
            const head = new THREE.Mesh(headGeo, bodyMat);
            head.position.y = 4.5;
            group.add(head);
            // çœ¼ç›
            const eyeMat = new THREE.MeshBasicMaterial({ color: 0x000000 });
            const eyeGeo = new THREE.SphereGeometry(0.3, 8, 8);
            const eyeL = new THREE.Mesh(eyeGeo, eyeMat);
            eyeL.position.set(-0.6, 4.7, 1.8);
            group.add(eyeL);
            const eyeR = new THREE.Mesh(eyeGeo, eyeMat);
            eyeR.position.set(0.6, 4.7, 1.8);
            group.add(eyeR);
            // ä½ç½®å’Œå¤§å°
            group.position.set(...position);
            group.scale.set(1.5, 1.5, 1.5);
            currentModel = group;
            scene.add(group);
            console.log("âœ“ è§’è‰²æ¨¡å‹åˆ›å»ºå®Œæˆ:", name);
        }

        // === 4. ç²’å­ç³»ç»Ÿ ===
        function createParticles() {
            particleGroup = new THREE.Group();
            scene.add(particleGroup);
            // ç²’å­çº¹ç†
            const canvas = document.createElement('canvas');
            canvas.width = canvas.height = 32;
            const ctx = canvas.getContext('2d');
            const gradient = ctx.createRadialGradient(16,16,0, 16,16,16);
            gradient.addColorStop(0, 'rgba(255,255,255,1)');
            gradient.addColorStop(1, 'rgba(255,255,255,0)');
            ctx.fillStyle = gradient; ctx.fillRect(0,0,32,32);
            const texture = new THREE.CanvasTexture(canvas);
            // é¢œè‰²
            const colors = [0xFFD700, 0xFF0000, 0x00FF00, 0x00FFFF, 0xFF69B4];
            // åˆ›å»ºç²’å­
            for (let i = 0; i < PARTICLE_COUNT; i++) {
                const color = colors[i % colors.length];
                const material = new THREE.SpriteMaterial({
                    map: texture, color: color, transparent: true,
                    opacity: 0.8, blending: THREE.AdditiveBlending
                });
                const sprite = new THREE.Sprite(material);
                sprite.position.set(
                    (Math.random()-0.5)*60,
                    (Math.random()-0.5)*60,
                    (Math.random()-0.5)*60
                );
                const size = Math.random()*1+0.5;
                sprite.scale.set(size, size, 1);
                // è®¡ç®—åœ£è¯æ ‘ä½ç½®
                const yNorm = i/PARTICLE_COUNT;
                const y = yNorm*TREE_HEIGHT - TREE_HEIGHT/2;
                const r = TREE_RADIUS*(1-yNorm);
                const angle = i*0.2;
                particles.push({
                    mesh: sprite,
                    treePos: new THREE.Vector3(Math.cos(angle)*r, y, Math.sin(angle)*r),
                    initialPos: sprite.position.clone(),
                    fireworkVel: new THREE.Vector3(),
                    color: color, size: size
                });
                particleGroup.add(sprite);
            }
            console.log("âœ“ ç²’å­ç³»ç»Ÿåˆ›å»ºå®Œæˆï¼Œæ•°é‡:", PARTICLE_COUNT);
        }

        function updateParticles() {
            const time = Date.now()*0.001;
            particles.forEach(p => {
                const mesh = p.mesh, pos = mesh.position;
                if (targetShape === 'tree') {
                    // èšåˆæˆæ ‘
                    pos.lerp(p.treePos, 0.08);
                    mesh.material.opacity += (0.9 - mesh.material.opacity)*0.1;
                    // æ—‹è½¬
                    const rot = time*0.5;
                    const x = p.treePos.x*Math.cos(rot) - p.treePos.z*Math.sin(rot);
                    const z = p.treePos.x*Math.sin(rot) + p.treePos.z*Math.cos(rot);
                    p.treePos.x = x; p.treePos.z = z;
                } else if (targetShape === 'firework') {
                    // çƒŸèŠ±çˆ†ç‚¸
                    if (p.fireworkVel.lengthSq() === 0) {
                        p.fireworkVel.copy(pos).normalize().multiplyScalar(Math.random()*0.5+0.2);
                        p.fireworkVel.y += Math.random()*0.3;
                    }
                    pos.add(p.fireworkVel);
                    p.fireworkVel.y -= 0.015;
                    mesh.material.opacity *= 0.97;
                    // é‡ç½®
                    if (mesh.material.opacity < 0.05) {
                        pos.copy(p.initialPos);
                        mesh.material.opacity = 1;
                        p.fireworkVel.set(0,0,0);
                    }
                } else {
                    // éšæœºæ¼‚æµ®
                    pos.x += Math.sin(time+pos.y*0.1)*0.02;
                    pos.y += Math.cos(time+pos.z*0.1)*0.02;
                    pos.lerp(p.initialPos, 0.01);
                    mesh.material.opacity += (0.8 - mesh.material.opacity)*0.05;
                    p.fireworkVel.set(0,0,0);
                }
            });
        }

        // === 5. æ‰‹åŠ¿è¯†åˆ«ä¸æ‘„åƒå¤´ ===
        async function initHandTracking() {
            // åŠ¨æ€åŠ è½½MediaPipeï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm/vision_bundle.js';
                script.onload = async function() {
                    try {
                        const vision = window.vision;
                        if (!vision) reject(new Error("visionå¯¹è±¡æœªå®šä¹‰"));
                        const filesetResolver = vision.FilesetResolver;
                        const HandLandmarker = vision.HandLandmarker;
                        const visionInstance = await filesetResolver.forVisionTasks(
                            "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm"
                        );
                        handLandmarker = await HandLandmarker.createFromOptions(visionInstance, {
                            baseOptions: {
                                modelAssetPath: 'https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task',
                                delegate: "GPU"
                            },
                            runningMode: "VIDEO",
                            numHands: 1
                        });
                        console.log("âœ“ MediaPipe æ‰‹åŠ¿è¯†åˆ«åŠ è½½æˆåŠŸ");
                        resolve();
                    } catch (e) {
                        reject(e);
                    }
                };
                script.onerror = () => reject(new Error("MediaPipeè„šæœ¬åŠ è½½å¤±è´¥"));
                document.head.appendChild(script);
            });
        }

        window.initCamera = async function() {
            const video = document.getElementById("video-preview");
            const statusEl = document.getElementById('status');
            statusEl.innerText = "æ­£åœ¨è¯·æ±‚æ‘„åƒå¤´æƒé™...";
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: "user", width: 480, height: 360 }
                });
                video.srcObject = stream;
                await new Promise(resolve => video.onloadeddata = resolve);
                video.play();
                webcamRunning = true;
                statusEl.innerText = "æ‘„åƒå¤´å·²å¼€å¯ï¼è¯·å°è¯•æ‰‹åŠ¿ï¼šâœŠæ¡æ‹³ æˆ– âœ‹å¼ æ‰‹";
                console.log("âœ“ æ‘„åƒå¤´å¯åŠ¨æˆåŠŸ");
                // å¼€å§‹æ‰‹åŠ¿æ£€æµ‹å¾ªç¯
                detectGestureLoop();
            } catch (err) {
                statusEl.innerText = "æ‘„åƒå¤´æƒé™è¢«æ‹’ç»ï¼Œè¯·ä½¿ç”¨æ‰‹åŠ¨æµ‹è¯•æŒ‰é’®";
                console.error("æ‘„åƒå¤´å¯åŠ¨å¤±è´¥:", err);
            }
        };

        function detectGestureLoop() {
            if (!handLandmarker || !webcamRunning) return;
            const video = document.getElementById("video-preview");
            try {
                const results = handLandmarker.detectForVideo(video, performance.now());
                if (results.landmarks && results.landmarks.length > 0) {
                    isHandDetected = true;
                    const landmarks = results.landmarks[0];
                    // æ‰‹æŒä½ç½®
                    const wrist = landmarks[0];
                    handPosition.set((0.5-wrist.x)*30, (0.5-wrist.y)*20+5, 10);
                    // æ‰‹åŠ¿è¯†åˆ«ï¼šè®¡ç®—æŒ‡å°–åˆ°æŒæ ¹çš„è·ç¦»
                    const tips = [8,12,16,20];
                    let totalDist = 0;
                    tips.forEach(i => {
                        const dx = landmarks[i].x - wrist.x;
                        const dy = landmarks[i].y - wrist.y;
                        totalDist += Math.sqrt(dx*dx + dy*dy);
                    });
                    const avgDist = totalDist/tips.length;
                    // å†³ç­–
                    if (avgDist < 0.2) targetShape = 'tree';
                    else if (avgDist > 0.3) targetShape = 'firework';
                    // else targetShape = 'random'; // å¯ä¿æŒåŸçŠ¶
                } else {
                    isHandDetected = false;
                }
            } catch (e) {
                // å¿½ç•¥å•æ¬¡æ£€æµ‹é”™è¯¯
            }
            requestAnimationFrame(detectGestureLoop);
        }

        // === 6. åŠ¨ç”»å¾ªç¯ä¸æ¨¡å‹æ§åˆ¶ ===
        function animate() {
            requestAnimationFrame(animate);
            updateParticles();
            // æ¨¡å‹çœ‹å‘æ‰‹éƒ¨
            if (currentModel && isHandDetected) {
                currentModel.lookAt(handPosition.x+15, handPosition.y, 10);
                if (targetShape === 'tree') {
                    currentModel.position.y = -8 + Math.abs(Math.sin(Date.now()*0.005))*2;
                } else {
                    currentModel.position.y = -8;
                }
            }
            if (controls) controls.update();
            renderer.render(scene, camera);
        }

        // === 7. å…¨å±€æ§åˆ¶å‡½æ•° ===
        window.switchModel = loadModel;
        window.forceShape = function(shape) {
            targetShape = shape;
            const msg = {
                'tree': 'æ‰‹åŠ¨æ¨¡å¼ï¼šåœ£è¯æ ‘',
                'firework': 'æ‰‹åŠ¨æ¨¡å¼ï¼šçƒŸèŠ±',
                'random': 'æ‰‹åŠ¨æ¨¡å¼ï¼šè‡ªç”±æ¼‚æµ®'
            }[shape] || 'æ‰‹åŠ¨æ§åˆ¶';
            document.getElementById('status').innerText = msg;
            console.log('æ‰‹åŠ¨åˆ‡æ¢çŠ¶æ€:', shape);
        };

        // æ§åˆ¶å°æç¤º
        console.log("ğŸ® æ§åˆ¶è¯´æ˜ï¼š");
        console.log("1. ç‚¹å‡»ã€Œå¯åŠ¨æ‘„åƒå¤´ã€å¼€å¯æ‰‹åŠ¿è¯†åˆ«");
        console.log("2. ä½¿ç”¨ä¸‰ä¸ªæŒ‰é’®åˆ‡æ¢è§’è‰²æ¨¡å‹");
        console.log("3. ä½¿ç”¨ã€Œæµ‹è¯•ã€æŒ‰é’®æ‰‹åŠ¨æ§åˆ¶ç²’å­æ•ˆæœ");
        console.log("4. åœ¨å¾®ä¿¡ä¸­ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨ç‚¹å‡»é¡µé¢ä»¥æ¿€æ´»æ‘„åƒå¤´");
    </script>
</body>
</html>
